经过修改，把ssh连接操作全部修改为本地操作，同时把程序运行时报的一些其他的小错误修改后，目前能够获得`Rankings.dat0`和`UserVisits.dat0`这两个需要的文件。

但`UserVisits.dat0`这个文件里第二列数据目前不对（第二列数据本来应该是`XXX.html`，与genehtml里面的c语言程序相关，但这里是None，MYNONE是我输出的时候写的固定字符串）

![image-20211201100046745](https://raw.githubusercontent.com/liang636600/cloudImg/master/images/image-20211201100046745.png)

`Rankings.dat0`该文件里的内容为空，本来的话应该为三列(pageRank,pageURL如xxx.html,avgDuration)

![image-20211201100422488](https://raw.githubusercontent.com/liang636600/cloudImg/master/images/image-20211201100422488.png)

运行generateData.py程序时

报错

```
genUserVisits.py: 未找到进程
extractUrls.py: 未找到进程
genhtml: 未找到进程
parsehtml: 未找到进程
cp: 无法获取'redo_ip.py' 的文件状态(stat): 没有那个文件或目录
cp: 无法获取'data_files/country_codes.dat' 的文件状态(stat): 没有那个文件或目录
/home/iscas/Desktop/temp/homeiscasDesktoptempdatagen_temp_root//parsehtml: error while loading shared libraries: libcrypto.so.1.0.0: cannot open shared object file: No such file or directory
```

---

上面报错主要涉及到对parsehtml和genhtml的理解

1. genhtml理解

   ```
   Usage: genhtml [-z number -ns number -s number -f number -r number]
   	-z number: zipfian parameter (default .05)
   	-ns number: number of sites (default 100)
   	-s number: this site number (default 0)
   	-f number: files per site (default 100000)
   	-r number: random number seed (default 0)
   ```

   site这里指的是站点，我这里的site应该是1个，生成的html文件名第一个字符是0
   
2. parsehtml的理解
   
      ```
      Sample program to parse HTML files in dirs/ subdirectories and output URL-count pairs.
      Implementation scans HTML files, extracts URLs and then uses a hash table to store information about URL frequency.
      
      Usage:  parsehtml  (no parameters)
      Depends on docs/ directory generated by the genhtml tool.
      ```
   
      在运行时报错`parsehtml: error while loading shared libraries: libcrypto.so.1.0.0: cannot open shared object file: No such file or directory`
   
      通过`ldd 程序、可执行文件的绝对路径`
   
      ![image-20211201111326760](https://raw.githubusercontent.com/liang636600/cloudImg/master/images/image-20211201111326760.png)
   
      * 暂时失败：尝试安装libssl1.0.0
      
        `sudo apt-get install libssl1.0.0`
      
        报错
      
        ```
        E: Unable to locate package libssl1.0.0
        E: Couldn't find any package by glob 'libssl1.0.0'
        E: Couldn't find any package by regex 'libssl1.0.0'
        ```
      
      * 暂时失败：尝试加一个libssl1.0.0链接的方式
      
        运行命令`ldconfig -p | grep libcrypto`
      
        ```
        libcrypto.so.1.1 (libc6,x86-64) => /lib/x86_64-linux-gnu/libcrypto.so.1.1
        libcrypto.so.1.1 (libc6) => /lib/i386-linux-gnu/libcrypto.so.1.1
        ```
      
        建立软连接
      
        `ln -s  /lib/x86_64-linux-gnu/libcrypto.so.1.1  /lib/x86_64-linux-gnu/libcrypto.so.1.0.0`解决了该问题
      
        报错
      
        ```
        libcrypto.so.1.0.0: version `OPENSSL_1.0.0' not found
        ```
      
      * ```
        下载：https://www.openssl.org/source/old/1.0.1/openssl-1.0.1e.tar.gz
        解压缩后在主目录下执行./config shared zlib-dynamic 来生成Makefile文件。
        通过make来生成生成libssl.so.1.0.0和libcrypto.so.1.0.0
        将这2个文件拷贝到cd /usr/lib64/，然后执行以下2条生成软连接解决。
        ln -s libssl.so.1.0.0 libssl.so.10
        ln -s libcrypto.so.1.0.0 libcrypto.so.10
        我是执行的是ln -s  /usr/lib64/libcrypto.so.1.0.0  /lib/x86_64-linux-gnu/libcrypto.so.1.0.0解决
        本质上建立链接，后面的文件名指向的是前面的文件名
        ```
      
        解决

---

然后运行generateData.py

生成的UserVisits.dat0中的第二列有的行已经有数据了，有的行没有数据

![image-20211201151812134](https://raw.githubusercontent.com/liang636600/cloudImg/master/images/image-20211201151812134.png)

同样，在Rankings.dat0中，数据也有了，只不过这里的分隔符有点问题`\|`

![image-20211201152048487](https://raw.githubusercontent.com/liang636600/cloudImg/master/images/image-20211201152048487.png)

修改duplicate.spy把delim写为固定字符`|`，解决问题

![image-20211201171019458](https://raw.githubusercontent.com/liang636600/cloudImg/master/images/image-20211201171019458.png)

---

